<?xml version="1.0"?>
<!--
    Default odometry launch file - for Applied Estimation Project - Akanshu, Kyle, & Sharang
-->


<launch>
  <!-- IMU -->
  <node ns="imu" name="imu_node" pkg="svea_sensors" type="bno055_i2c_node" respawn="true" respawn_delay="2">
    <param name="device" type="string" value="/dev/i2c-8"/>
    <param name="address" type="int" value="40"/> <!-- 0x28 == 40 is the default for BNO055 -->
    <param name="frame_id" type="string" value="imu"/>
  </node>
  <!-- Static transforms for sensors -->
  <include file="$(find svea_sensors)/launch/transforms.launch" />
  <include file="$(find svea_sensors)/launch/lli_ctrl_to_twist.launch" />
  <!--node pkg="tf2_ros" type="static_transform_publisher" name="odom_base_link" args="0 0 0 0 0 0 odom base_link" /-->

    <!-- Pull control message -->
    <node pkg="rosserial_python" type="serial_node.py" name="serial_node">
        <!-- <param name="port" value="/dev/arduinoPWM"/> -->
        <param name="port" value="/dev/ttyACM0"/>
        <param name ="baud" value="250000" />
        <remap from="/lli/ctrl_request" to="/SVEA6/lli/ctrl_request" />
        <remap from="/lli/ctrl_actuated" to="/SVEA6/lli/ctrl_actuated" />
    </node>
  
  <!-- Robot localization-->
  <node pkg="robot_localization" type="ekf_localization_node" name="ekf_se" clear_params="true" output ="screen">
    <rosparam command="load" file="$(find svea_sensors)/params/robot_localization/default_ekf_project.yaml" />
    <!--param name="imu0" value="/imu/data"/-->
    <remap from="odometry/filtered" to="odometry/proprioceptive"/>
    <!--param name="twist0" value="/SVEA0/twist_from_control"/--> <!--Control Signal Input -->
    <!--param name="twist0" value="/cmd_vel"/--> <!--Control Signal Input -->
    <!--  Placeholder for output topic remapping
    <remap from="odometry/filtered" to=""/>
    <remap from="accel/filtered" to=""/-->
   
  </node>
  

</launch>
